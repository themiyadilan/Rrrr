const { cmd } = require('../command'), { jsonformat } = require('../lib/functions'); cmd({ pattern: "close", react: "ğŸ‘º", desc: "close a group", category: "group", use: '.mute', filename: __filename }, async (conn, mek, m, { from, isGroup, isBotAdmins, isAdmins, reply }) => { try { if (!isGroup) return reply('This command can only be used in a group. ğŸš«'); if (!isBotAdmins) return reply('Bot must be an admin to use this command. ğŸ¤–'); if (!isAdmins) return reply('Only admins can use this command. ğŸ‘®â€â™‚ï¸'); await conn.groupSettingUpdate(mek.chat, 'announcement'); await conn.sendMessage(from, { text: 'Group closed now. ğŸ”’\ná´Ê€ á´…ÉªÊŸá´€ á´êœ°á´„', react: { text: 'âœ…', key: mek.key } }); } catch (e) { reply('Error closing the group. âš ï¸'); console.log(e); } }); cmd({ pattern: "open", react: "ğŸ‘º", desc: "open a group", category: "group", use: '.unmute', filename: __filename }, async (conn, mek, m, { from, isGroup, isBotAdmins, isAdmins, reply }) => { try { if (!isGroup) return reply('This command can only be used in a group. ğŸš«'); if (!isBotAdmins) return reply('Bot must be an admin to use this command. ğŸ¤–'); if (!isAdmins) return reply('Only admins can use this command. ğŸ‘®â€â™‚ï¸'); await conn.groupSettingUpdate(mek.chat, 'not_announcement'); await conn.sendMessage(from, { text: 'Group opened now. ğŸ”“\ná´Ê€ á´…ÉªÊŸá´€ á´êœ°á´„', react: { text: 'âœ…', key: mek.key } }); } catch (e) { reply('Error opening the group. âš ï¸'); console.log(e); } }); cmd({ pattern: "setadmin", react: "ğŸ¤", desc: "promote admin to a member", category: "group", use: '.promote', filename: __filename }, async (conn, mek, m, { from, isGroup, isBotAdmins, isAdmins, reply }) => { try { if (!isGroup) return reply('This command can only be used in a group. ğŸš«'); if (!isBotAdmins) return reply('Bot must be an admin to use this command. ğŸ¤–'); if (!isAdmins) return reply('Only admins can use this command. ğŸ‘®â€â™‚ï¸'); let users = mek.mentionedJid ? mek.mentionedJid : mek.quoted ? mek.quoted.sender : q.replace(/[^0-9]/g, '') + '@s.whatsapp.net'; await conn.groupParticipantsUpdate(mek.chat, [users], 'promote'); reply('Congratulations, you are now an admin! ğŸ¥³\ná´Ê€ á´…ÉªÊŸá´€ á´êœ°á´„'); await conn.sendMessage(from, { react: { text: 'âœ…', key: mek.key } }); } catch (e) { reply('Error promoting to admin. âš ï¸'); console.log(e); } }); cmd({ pattern: "deladmin", react: "ğŸš«", desc: "demote admin to a member", category: "group", use: '.demote', filename: __filename }, async (conn, mek, m, { from, isGroup, isBotAdmins, isAdmins, reply }) => { try { if (!isGroup) return reply('This command can only be used in a group. ğŸš«'); if (!isBotAdmins) return reply('Bot must be an admin to use this command. ğŸ¤–'); if (!isAdmins) return reply('Only admins can use this command. ğŸ‘®â€â™‚ï¸'); let users = mek.mentionedJid ? mek.mentionedJid : mek.quoted ? mek.quoted.sender : q.replace(/[^0-9]/g, '') + '@s.whatsapp.net'; await conn.groupParticipantsUpdate(mek.chat, [users], 'demote'); reply('You have been demoted from admin. ğŸ˜”\ná´Ê€ á´…ÉªÊŸá´€ á´êœ°á´„'); await conn.sendMessage(from, { react: { text: 'âœ…', key: mek.key } }); } catch (e) { reply('Error demoting admin. âš ï¸'); console.log(e); } }); cmd({ pattern: "delete", react: "âŒ", alias: [","], desc: "delete message", category: "group", use: '.del', filename: __filename }, async (conn, mek, m, { from, isOwner, isAdmins, reply }) => { if (!isOwner && !isAdmins) return; try { if (!m.quoted) return reply('No message to delete. ğŸ—‘ï¸'); const key = { remoteJid: m.chat, fromMe: false, id: m.quoted.id, participant: m.quoted.sender }; await conn.sendMessage(m.chat, { delete: key }); reply('Message deleted. âœ…\ná´Ê€ á´…ÉªÊŸá´€ á´êœ°á´„'); } catch (e) { console.log(e); reply('Error deleting message. âš ï¸'); } }); cmd({ pattern: "kick", desc: "Remove a member from the group.", category: "group", react: "ğŸš«", filename: __filename }, async (conn, mek, m, { from, isGroup, isBotAdmins, isAdmins, reply }) => { try { if (!isGroup) return reply('This command can only be used in a group. ğŸš«'); if (!isBotAdmins) return reply('Bot must be an admin to use this command. ğŸ¤–'); if (!isAdmins) return reply('Only admins can use this command. ğŸ‘®â€â™‚ï¸'); const user = m.mentioned[0] || m.quoted?.sender; if (!user) return reply('Please tag or reply to a user to remove. ğŸ™'); await conn.groupParticipantsUpdate(from, [user], 'remove'); await reply(`@${user.split('@')[0]} has been removed from the group. ğŸ‘‹`, { mentions: [user] }); } catch (e) { console.log(e); reply('Error removing member. âš ï¸'); } }); cmd({ pattern: "add", desc: "Add a member to the group.", category: "group", react: "â•", filename: __filename }, async (conn, mek, m, { from, isGroup, isBotAdmins, isAdmins, reply }) => { try { if (!isGroup) return reply('This command can only be used in a group. ğŸš«'); if (!isBotAdmins) return reply('Bot must be an admin to use this command. ğŸ¤–'); if (!isAdmins) return reply('Only admins can use this command. ğŸ‘®â€â™‚ï¸'); const user = q.split(' ')[0]; if (!user) return reply('Please provide a phone number to add. ğŸ“'); await conn.groupParticipantsUpdate(from, [`${user}@s.whatsapp.net`], 'add'); await reply(`@${user} has been added to the group. ğŸ‰`, { mentions: [`${user}@s.whatsapp.net`] }); } catch (e) { console.log(e); reply('Error adding member. âš ï¸'); } });
cmd({ pattern: "join", react: "ğŸ”—", desc: "Join a group via group link.", category: "group", use: '.join (group link)', filename: __filename }, async (conn, mek, m, { reply }) => { try { const groupLink = (m.text || '').match(/https:\/\/chat\.whatsapp\.com\/([a-zA-Z0-9]+)/); if (!groupLink) return reply('Please provide a valid group link. ğŸš«'); const result = await conn.groupAcceptInvite(groupLink[1]); reply(result ? 'Successfully joined the group! ğŸ‰' : 'Failed to join the group. âš ï¸'); } catch (e) { reply('Error joining the group. âš ï¸'); console.log(e); } });
